<h1 id="moduly">Moduly
<a href="#header-moduly" class="header-link">#</a>
</h1>
<p>Modul je v Pythonu něco, z čeho můžeme importovat.
Třeba z modulu <code>math</code> můžeš importovat funkci <code>sqrt</code>:</p>
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">sqrt</span>

<span class="nb">print</span><span class="p">(</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
</pre></div><p>Kromě importování jednotlivých proměnných z modulu
můžeš importovat i celý modul najednou.
K tomu, co modul nabízí, se pak dostaneš pomocí
tečky – podobně jako se pomocí <code>'Ahoj'.upper</code> dostaneš k metodě, kterou nabízí
řetězec.</p>
<p>Například:</p>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">turtle</span>

<span class="n">turtle</span><span class="o">.</span><span class="n">left</span><span class="p">(</span><span class="mi">90</span><span class="p">)</span>
<span class="n">turtle</span><span class="o">.</span><span class="n">color</span><span class="p">(</span><span class="s1">&#39;red&#39;</span><span class="p">)</span>
<span class="n">turtle</span><span class="o">.</span><span class="n">forward</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
<span class="n">turtle</span><span class="o">.</span><span class="n">exitonclick</span><span class="p">()</span>
</pre></div><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">math</span>

<span class="nb">print</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="p">))</span>
</pre></div><div class="admonition note"><p class="admonition-title">Hvězdičky nechceme</p>
<p>Možná jsi v dokumentaci nebo na jiném kurzu viděl/a příkaz import
s hvězdičkou (<code>*</code>).
Pokud ano, v rámci tohoto kurzu na hvězdičku prosím
zapomeň a importuj místo toho radši celý modul.
Až začneš psát větší programy, zjednoduší ti
to práci.</p>
</div><h2 id="vlastni_moduly">Vlastní moduly
<a href="#header-vlastni_moduly" class="header-link">#</a>
</h2>
<p>A teď to hlavní!
Můžeš vytvořit vlastní importovatelný modul
a to jen tak, že uděláš pythonní soubor.
Funkce, které v něm nadefinuješ, a globální proměnné,
které v něm nastavíš, pak budou k dispozici tam, kde modul naimportuješ.</p>
<p>Zkus si to!
Vytvoř soubor <code>louka.py</code> a do něj napiš:</p>
<div class="highlight"><pre><span></span><span class="n">barva_travy</span> <span class="o">=</span> <span class="s1">&#39;zelená&#39;</span>
<span class="n">pocet_kotatek</span> <span class="o">=</span> <span class="mi">28</span>

<span class="k">def</span> <span class="nf">popis_stav</span><span class="p">():</span>
    <span class="k">return</span> <span class="s1">&#39;Tráva je </span><span class="si">{barva}</span><span class="s1">. Prohání se po ní </span><span class="si">{pocet}</span><span class="s1"> koťátek&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
        <span class="n">barva</span><span class="o">=</span><span class="n">barva_travy</span><span class="p">,</span> <span class="n">pocet</span><span class="o">=</span><span class="n">pocet_kotatek</span><span class="p">)</span>
</pre></div><p>A pak v dalším souboru, třeba <code>vypis.py</code>, napiš:</p>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">louka</span>

<span class="nb">print</span><span class="p">(</span><span class="n">louka</span><span class="o">.</span><span class="n">popis_stav</span><span class="p">())</span>
</pre></div><p>a pak spusť:</p>
<div class="highlight"><pre><span></span><span class="gp">$ </span>python vypis.py
</pre></div><p>Příkaz <code>import</code> hledá soubory (mimo jiné) v adresáři,
ve kterém je „hlavní modul” programu – tedy soubor,
který spouštíš (u nás <code>vypis.py</code>).
Oba soubory by proto měly být ve stejném adresáři.</p>
<h2 id="vedlejsi_efekty">Vedlejší efekty
<a href="#header-vedlejsi_efekty" class="header-link">#</a>
</h2>
<p>Co přesně dělá příkaz <code>import louka</code>?</p>
<p>Python najde příslušný soubor (<code>louka.py</code>) a provede v něm všechny příkazy,
odshora dolů, jako v normálním Pythonním programu.
Všechny globální proměnné (včetně nadefinovaných funkcí) pak dá k dispozici
kódu, který „louku“ importoval.</p>
<p>Když pak stejný modul importuješ podruhé, už se neprovádí všechno
znovu – stejná sada proměnných se použije znovu.</p>
<p>Zkus si to – na konci <code>louka.py</code> dopiš:</p>
<div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Louka je zelená!&#39;</span><span class="p">)</span>
</pre></div><p>Spusť <code>python</code> (máš-li ho už spuštěný, ukonči a spusť znovu)
a zadej v něm:</p>
<div class="highlight"><pre><span></span><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;První import:&#39;</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">louka</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Druhý import:&#39;</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">louka</span>
</pre></div><p>Výpis se objeví jen poprvé.</p>
<p>Když takhle modul při importu „dělá“ něco víc, než jen nastavuje proměnné
a funkce, říká se, že má <em>vedlejší efekt</em> (angl. <em>side effect</em>).
Vedlejší efekt může být vypsání něčeho na obrazovku nebo do souboru,
vykreslení okýnka na obrazovku, otázka na uživatele pomocí <code>input</code>, atp.</p>
<p>V modulech připravených na importování se vedlejším efektům vyhýbáme:
úloha takového modulu je dát k dispozici <em>funkce</em>, které něco dělají,
ne to udělat přímo.
Všimni si například, že <code>import turtle</code> neukáže okýnko – to se objeví až po
zavolání <code>turtle.forward()</code>.</p>
<p>Příkaz <code>print</code> proto radši z modulu zase smaž.</p>
<h3 id="kontrukce_code__main__code">Kontrukce <code>__main__</code>
<a href="#header-kontrukce_code__main__code" class="header-link">#</a>
</h3>
<p>K odstranění těchto nežádoucích efektů se používá speciální proměnná <code>__name__</code>,
kterou má každý modul nastavnou při svém běhu.
Pokud modul spouštíš přímo, dostane hodnotu <code>'__main__'</code>. Pokud je importovaný,
bude v ní jeho název.<br>
Proto se používá konstrukce:</p>
<div class="highlight"><pre><span></span><span class="c1"># soubor s názvem start.py</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Hlavní funkce.&quot;&quot;&quot;</span>
    <span class="c1"># tady je začátek tvého kódu</span>
    <span class="o">...</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div><p>Pokud tento soubor importuješ, proměnná <code>__main__</code> bude mít hodnotu <code>'start'</code>, 
a funkce main se nespustí.</p>
<h2 id="adresar_pro_kazdy_projekt">Adresář pro každý projekt
<a href="#header-adresar_pro_kazdy_projekt" class="header-link">#</a>
</h2>
<p>Od teď budeš občas psát větší projekty,
které budou obsahovat více souvisejících souborů.
Pro každý takový projekt si udělej zvláštní adresář.
Lépe se pak vyznáš v tom, ke kterému projektu který soubor patří.</p>